#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-push hooks..."

# Run ESLint on all projects
echo "ğŸ“ Running ESLint..."
npm run lint || {
  echo "âŒ ESLint failed. Please fix the errors before pushing."
  exit 1
}

# Run security scan
echo "ğŸ”’ Running security scan..."
if command -v gitleaks > /dev/null 2>&1; then
  gitleaks detect --source . --verbose || {
    echo "âŒ Security scan failed. Please fix the issues before pushing."
    exit 1
  }
else
  echo "âš ï¸  Gitleaks not found. Skipping secret scan."
fi

# Run npm audit
echo "ğŸ” Running npm audit..."
npm run security:audit || {
  echo "âš ï¸  npm audit found vulnerabilities. Please review them."
}

echo "âœ… Pre-push hooks completed!"




